import React, { useState, useRef, useEffect } from 'react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';
import { ChevronDown, Users, TrendingUp, AlertTriangle, CheckCircle, Target, BookOpen, Lightbulb, Menu, X } from 'lucide-react';

// --- Data Extracted and Enhanced from the Report ---

const reportData = {
  overview: {
    title: "The New B2B Playbook: Navigating a Radically Reshaped US Market",
    summary: "The business-to-business (B2B) landscape in the United States is undergoing its most significant transformation in a generation. The old playbook is rapidly becoming obsolete, driven by demographic shifts, technological acceleration, and altered buyer expectations. Success now hinges on providing the most seamless, trustworthy, and efficient digital experience.",
    fullText: "Four core themes underpin this new reality. First is The Great Generational Handover, a seismic demographic shift where Millennials and Gen Z now constitute the overwhelming majority of B2B buyers. Second, this handover has fueled The Consumerization of B2B, where buyers bring the expectations of consumer giants like Amazon and Netflix to their professional purchasing. Third, in an environment saturated with information, trust has emerged as the most valuable currency, leading to The Trust Economy. Finally, these forces create The Digital-First, Human-Centric Paradox. While buyers overwhelmingly demand digital self-service, they have not abandoned the need for human connection, especially for expert guidance at critical decision points."
  },
  charts: {
      decisionDrivers: [
        { name: 'Overall Experience', value: 80 },
        { name: 'Product Features', value: 15 },
        { name: 'Price', value: 5 },
      ],
      decisionDriverColors: ['#4f46e5', '#818cf8', '#c7d2fe'],
  },
  comparativeTable: [
      { attribute: 'Primary Identity', genZ: 'The Pragmatic Digital Native', millennials: 'The Digital-First Driver', genX: 'The Skeptical, Pragmatic Leader', babyBoomers: 'The Relationship-Driven Veteran' },
      { attribute: 'Key Motivators', genZ: 'Values, Efficiency, Work-Life Balance', millennials: 'Seamless Experience, Peer Proof, Speed', genX: 'ROI, Reliability, Security', babyBoomers: 'Trust, Quality, Customer Service' },
      { attribute: 'Primary Research Channels', genZ: 'Social Media, Peer Networks', millennials: 'Review Sites, Demos', genX: 'LinkedIn, Industry Events', babyBoomers: 'Referrals, Direct Contact' },
      { attribute: 'Biggest Deal-Breaker', genZ: 'Poor Corporate Values, Clunky UX', millennials: 'Opaque Pricing, High-Friction', genX: 'Marketing Hype, Security Flaws', babyBoomers: 'Poor Service, Lack of Trust' },
  ],
  generations: {
    'gen-z': {
      id: 'gen-z',
      name: 'Gen Z (18-24)',
      title: 'The Pragmatic Digital Native Enters the Workforce',
      overview: "Gen Z is a present and growing force, making up 30% of the US workforce by 2025. For them, a seamless digital experience is the absolute baseline expectation. Their decision-making is profoundly values-driven, prioritizing ethical practices, diversity, and sustainability. They are skeptical of corporate jargon and expect transparency. They view AI as a functional tool but are attuned to its ethical implications.",
      quotes: [
          "\"If a company's values don't seem to align with mine on things like diversity and sustainability, it's a red flag.\"",
          "\"If I have to book a call with a sales rep just to see how the product works, I'm probably going to bounce.\"",
          "\"I trust what people in my network on LinkedIn and in a few professional Slack groups are saying way more than a polished ad.\""
      ],
      needs: ["Flawless, intuitive, mobile-first digital products.","Alignment with their personal values (ethics, sustainability).","Transparent, authentic, and direct communication.","Instant gratification and profound efficiency in tools.","Strong social proof and validation from peer networks."],
      expectations: ["Ungated access to demos and free trials.","B2B websites and apps to be perfectly mobile-optimized.","Products that reduce stress and support work-life balance.","Visually-driven, 'snackable' content (short videos, infographics).","Companies to be responsive to feedback and transparent about their culture."],
      behaviors: ["Researches a company's values and social media before engaging.","Abandons platforms that require a sales call for a basic product demo.","Trusts peer reviews on social media and in communities over ads.","Uses mobile devices throughout the entire purchasing journey.","Seeks tools that offer quick onboarding and immediate value."]
    },
    'millennials': {
      id: 'millennials',
      name: 'Millennials (25-44)',
      title: 'The Architects of the New B2B Reality',
      overview: "As the dominant force in B2B, making up 73% of all buyers, Millennials have driven the 'consumerization' of business purchasing. Their digital-first mindset is the new standard. They are defined by an unwavering demand for self-service, independence, and a profound reliance on peer validation. They are skeptical of traditional sales-led processes and expect to find answers on their own through free trials, demos, and user reviews.",
      quotes: [
          "\"Don't make me talk to a salesperson to find out your price. If I can't find it on your website in 30 seconds, I'm assuming you're hiding something.\"",
          "\"My buying process starts on G2 and Capterra, not your website. I want to see what actual users are saying—the good, the bad, and the ugly.\"",
          "\"I need a solution that feels like it was made in this decade. If your website isn't mobile-friendly... it tells me your tech is probably outdated too.\""
      ],
      needs: ["Radical price transparency.","A true B2C-quality e-commerce experience.","Self-service research tools and product-led growth models (freemium/trials).","Hyper-personalized content and interactions.","Seamless, mobile-friendly journey from research to checkout."],
      expectations: ["To find pricing information easily on a website.","To 'try before they buy' without sales intervention.","B2B marketplaces to offer efficiency and user control.","Amazon-like fulfillment with real-time tracking and fast delivery.","Salespeople to act as expert consultants, not gatekeepers."],
      behaviors: ["Starts their buying process on third-party review sites like G2 and Capterra.","Completes up to 70% of the buying process online before supplier engagement.","Trusts unfiltered user reviews infinitely more than marketing collateral.","Will switch suppliers for a better digital checkout or faster delivery.","Follows a non-linear, self-directed buying journey across multiple channels."]
    },
    'gen-x': {
        id: 'gen-x',
        name: 'Gen X (45-54)',
        title: 'The Skeptical, ROI-Focused Decision-Maker',
        overview: "Gen X holds a disproportionate number of leadership roles controlling budgets. They are the critical bridge generation: tech-savvy yet grounded, skeptical of marketing hype, and relentlessly focused on tangible results. Their buying behavior is defined by diligent, independent research and a primary focus on security and demonstrable value. For Gen X, the ultimate question is not 'What's new?' but 'What's the value?'",
        quotes: [
            "\"Don't just tell me your software uses AI. Show me the numbers. Give me a case study from a company my size... that shows a clear ROI.\"",
            "\"Before we even talk features, I want to see your security certifications and data privacy policies... If your platform isn't secure, the conversation is over.\"",
            "\"I'll read your whitepapers and watch your demos, but I'll also talk to my peers at our next industry conference. A face-to-face conversation is still incredibly valuable.\""
        ],
        needs: ["A clear, defensible Return on Investment (ROI).","Robust data security and privacy assurances.","Authoritative, self-service knowledge bases for independent research.","Direct, straightforward communication without 'marketing fluff'.","Proof of value through detailed case studies with hard numbers."],
        expectations: ["Vendors to lead with a solid business case, not just features.","Security certifications (e.g., SOC 2) to be a core part of the pitch.","A hybrid engagement model blending digital content with high-touch in-person events.","A consistent, high-quality experience across all devices.","Loyalty to be earned continuously through reliability and quality."],
        behaviors: ["Conducts thorough, independent research before engaging sales.","Takes 1-6 months to finalize a purchase, weighing multiple options.","Vets a vendor's security policies as a primary evaluation criterion.","Uses LinkedIn for professional networking and vendor discovery.","Values face-to-face conversations at industry conferences to build trust."]
    },
    'baby-boomers': {
        id: 'baby-boomers',
        name: 'Baby Boomers (55+)',
        title: 'The Relationship-Driven, Digitally-Adapting Leader',
        overview: "Controlling a majority of company ownership stakes, Baby Boomers are influential decision-makers who blend traditional values with pragmatic digital adoption. The bedrock of their B2B approach is trust, built through long-term relationships and personal connections. While digitally active, they expect simplicity, accessibility, and, most importantly, the ability to reach a knowledgeable human for support.",
        quotes: [
            "\"I've been with our current supplier for over a decade. I know their sales rep by name... that kind of trust and reliability is what really matters to me.\"",
            "\"If your website is confusing or the text is too small, I'm not going to waste my time. I want clear facts, not a bunch of marketing fluff.\"",
            "\"I'm open to new technology if it's clear how it will make our business more efficient, but it needs to be straightforward to use.\""
        ],
        needs: ["Human-centric customer service with easy access to real people.","Simple, accessible digital interfaces with clear navigation and legible fonts.","Marketing messages focused on trust, quality, and reliability.","Straightforward, factual content that avoids jargon and slang.","Proof of value and a focus on a product as a smart, sound investment."],
        expectations: ["A prominent phone number and email for customer support.","Websites to be optimized for clarity (e.g., >12pt font, high contrast).","Vendors to have a long-standing reputation and positive testimonials.","AI to be presented as a tool for efficiency (the outcome), not complex tech.","A blend of digital outreach (Facebook, YouTube) and traditional channels (events, direct mail)."],
        behaviors: ["Values long-term partnerships with vendors they know and respect.","Is the most brand-loyal cohort, sticking with proven companies.","Goes online specifically to learn something new about a product or topic.","Responds to direct referrals and testimonials from their peer group.","Uses Facebook and YouTube to stay informed and connected."]
    }
  },
  caseStudies: {
    success: [
      { id: 1, company: 'Collibra (Belgium)', title: 'The Strategic Enterprise Play', overview: 'A data governance software company that successfully penetrated the US enterprise market by establishing a physical office in New York, relocating leadership to the US, and securing significant funding to hire seasoned US executives.', why: 'Collibra\'s success stemmed from deep, well-funded, and leadership-driven commitment. By physically embedding their leadership in the market, they built credibility, understood customer needs firsthand, and attracted top-tier local talent, overcoming high barriers to entry.' },
      { id: 2, company: 'Adyen (Netherlands)', title: 'The "Born Global" Payments Platform', overview: 'A payments platform that planned for international expansion from day one. They established a US presence early, secured referenceable clients like Uber remotely first, and embedded their strong corporate culture by mixing Dutch and local hires.', why: 'Adyen treated its culture as a competitive advantage and prioritized long-term vision. Hiring experienced US leadership and building a trusted local presence allowed them to win major domestic clients without losing their core identity.' },
      { id: 3, company: 'Axiom Equipment Group (Canada)', title: 'The Data-Driven Niche Dominator', overview: 'A supplier of off-grid equipment that used deep market research to identify high-potential niche markets (Midwest/West mining and renewables) before expanding, avoiding costly mistakes.', why: 'Axiom resisted treating the US as a monolith. By investing in market intelligence before investing in inventory, they maximized ROI with a focused, data-driven strategy, proving that precision is more effective than a broad, under-resourced approach.' },
    ],
    failure: [
      { id: 1, company: 'Boo.com (Europe)', title: 'The Dot-Com Disaster', overview: 'An ambitious fashion e-retailer that burned through $130M in less than a year. Their Flash-heavy website was too slow for the dial-up connections of the time, leading to a 0.25% conversion rate.', why: 'Boo.com prioritized a "wow factor" over the fundamental user experience. The lesson is that a product must be built for the users\' actual reality (bandwidth, workflow). Performance and reliability must always come before flashy, unusable features.' },
      { id: 2, company: 'Tesco\'s Fresh & Easy (UK)', title: 'The Cultural Mismatch', overview: 'The UK grocery giant invested over $1.5B in a US convenience store concept that failed because it misunderstood American consumer culture, particularly the preference for larger stores and bulk purchasing.', why: 'Tesco\'s research was surface-level; they observed behavior but didn\'t understand the underlying cultural drivers. The lesson is that you cannot simply import a business model. Deep, ethnographic understanding of the target market\'s practices and expectations is critical.' },
      { id: 3, company: 'AnkerBox (China)', title: 'Solving a Problem That Didn\'t Exist', overview: 'A successful Chinese phone battery rental service that failed in the US because the core problem it solved—a desperate need for a charge while socializing in bars—was not as prevalent or urgent for the US audience.', why: 'AnkerBox failed to validate the core problem in a new market. They assumed success in one tech-advanced country would translate to another. The lesson is to first conduct on-the-ground research to confirm your product solves a genuine and significant pain point for American businesses.' },
    ]
  },
  recommendations: [
    { id: 1, title: 'Map the Entire Buyer Journey', importance: 'The modern buying process is complex and non-linear. Focusing only on your own website and leads misses the majority of the evaluation process where trust is built and decisions are made.', implementation: 'Use analytics and customer interviews to identify all research touchpoints (review sites, social media, communities). Invest in your presence on these platforms. Align sales and marketing around supporting the buyer wherever they are in their journey.' },
    { id: 2, title: 'Adopt a "Consumer-Like" Digital Experience', importance: '80% of B2B buyers state that experience—not price—is the primary driver of their decisions. This is the new competitive battleground across all generations.', implementation: 'Invest in a modern, mobile-first website. Implement transparent pricing, self-service demos, and a frictionless e-commerce checkout. Provide B2C-style order tracking and communication.' },
    { id: 3, title: 'Build a Fortress of Trust and Social Proof', importance: 'Buyers across all generations are skeptical and rely heavily on peer validation. Trust is the prerequisite for a sale, especially for wary Millennials and Gen X.', implementation: 'Proactively manage your reputation on review sites like G2 and Capterra. Showcase authentic testimonials and detailed case studies. Highlight security certifications (SOC 2, ISO 27001) prominently.' },
    { id: 4, title: 'Balance Digital Self-Service with Human Expertise', importance: 'While buyers prefer self-service for research, they still value human interaction for complex discussions and building long-term partnerships, a key factor for Gen X and Boomers.', implementation: 'Offer robust self-service tools like knowledge bases and interactive demos. At the same time, make it easy to connect with a sales consultant or support agent via chat, phone, or email. Use events to deepen relationships.' },
    { id: 5, title: 'Unify Customer Data for True Personalization', importance: 'Buyers expect hyper-personalized interactions tailored to their needs. This is impossible with fragmented data and is a key expectation of digitally-native Millennials.', implementation: 'Invest in a Customer Data Platform (CDP) or ensure your CRM is the central source of truth. Integrate your martech stack to allow for seamless data flow, enabling behavior-driven personalization across all channels.' },
    { id: 6, title: 'Demonstrate AI\'s ROI Clearly and Quickly', importance: 'Business leaders (especially Gen X) are fixated on AI ROI and will scale back investments that don\'t show value quickly. Buyers need to see how AI solves real problems.', implementation: 'Frame AI features around specific outcomes (e.g., "Automate 10 hours of manual work per week"). Use case studies and ROI calculators to quantify the financial benefit. Ensure AI tools are intuitive to speed up time-to-value.' },
    { id: 7, title: 'Address the Entire Buying Committee', importance: 'Buying groups are large and diverse. A feature that appeals to one stakeholder may be a security risk for another. Your value proposition must resonate with everyone from the end-user to the CFO.', implementation: 'Create tailored content for different personas (e.g., a security whitepaper for the CISO, an ROI model for the CFO, an efficiency-focused demo for the end-user). Train sales to navigate these complex conversations.' },
    { id: 8, title: 'Prioritize Data Privacy and Security as a Brand Pillar', importance: 'In an era of increasing regulation and scrutiny, a strong security posture is a powerful competitive differentiator, especially for risk-averse Gen X leaders.', implementation: 'Be transparent about data collection. Invest in third-party security audits and certifications (e.g., SOC 2, ISO 27001) and display them prominently. Ensure your data infrastructure uses end-to-end encryption.' },
    { id: 9, title: 'Simplify and Streamline the Buying Process', importance: '73% of B2B tech buyers found the buying process complex. Making it simpler is a direct way to improve the customer experience and differentiate your brand.', implementation: 'Map your buyer journey specifically to identify and eliminate obstacles. Can you reduce forms? Simplify legal contracts? Provide clearer guidance at each step? Every simplification adds significant value.' },
    { id: 10, title: 'Appoint an Executive Champion for Customer Experience', importance: 'Fragmented systems and misaligned teams are major barriers to innovation. A unified strategy requires top-down leadership to break down silos and foster a customer-centric culture.', implementation: 'This executive sponsor should foster collaboration, align marketing, sales, product, and tech teams around shared goals and metrics, and champion a culture of continuous learning.' },
  ],
};


// --- Reusable Components ---

const Card = ({ children, className = '' }) => (
  <div className={`bg-white rounded-2xl shadow-sm border border-gray-200/80 overflow-hidden transition-all duration-300 hover:shadow-lg ${className}`}>
    {children}
  </div>
);

const Section = React.forwardRef(({ id, title, icon, children, className = '' }, ref) => {
    const IconComponent = icon;
    return (
        <section id={id} ref={ref} className={`py-16 md:py-24 scroll-mt-20 ${className}`}>
            <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex items-center mb-12">
                    {IconComponent && <IconComponent className="w-9 h-9 text-indigo-500 mr-4" />}
                    <h2 className="text-4xl font-bold text-gray-800 tracking-tight">{title}</h2>
                </div>
                {children}
            </div>
        </section>
    );
});


// --- App Sections ---

const Overview = ({ data }) => {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <Section id="overview" title="Market Overview" icon={BookOpen} className="bg-gray-50/50">
      <Card>
        <div className="p-6 md:p-10">
          <h3 className="text-2xl lg:text-3xl font-bold text-gray-900 mb-4">{data.overview.title}</h3>
          <p className="text-gray-600 leading-relaxed mb-6">{data.overview.summary}</p>
          
          <div className={`grid transition-all duration-700 ease-in-out ${isExpanded ? 'grid-rows-[1fr] opacity-100' : 'grid-rows-[0fr] opacity-0'}`}>
              <div className="overflow-hidden">
                <p className="text-gray-600 leading-relaxed pt-2">{data.overview.fullText}</p>
              </div>
          </div>

          <button 
            onClick={() => setIsExpanded(!isExpanded)} 
            className="mt-4 text-indigo-600 font-semibold hover:text-indigo-800 transition-colors duration-200 flex items-center group"
          >
            {isExpanded ? 'Read Less' : 'Read More'}
            <ChevronDown className={`w-5 h-5 ml-2 transition-transform duration-300 group-hover:translate-y-0.5 ${isExpanded ? 'rotate-180' : ''}`}/>
          </button>
        </div>
      </Card>
      
      <div className="mt-16">
        <h3 className="text-3xl font-bold text-center text-gray-800 mb-12">Generational B2B Behavior Snapshot</h3>
        <div className="grid grid-cols-1 xl:grid-cols-2 gap-8 items-stretch">
            <Card className="h-full flex flex-col p-6 md:p-8">
                <h4 className="font-bold text-xl text-gray-700 mb-6 text-center">What Drives B2B Decisions?</h4>
                <div className="flex-grow">
                    <ResponsiveContainer width="100%" height={300}>
                        <PieChart>
                            <Pie data={data.charts.decisionDrivers} dataKey="value" nameKey="name" cx="50%" cy="50%" outerRadius={110} labelLine={false} label={({ cx, cy, midAngle, innerRadius, outerRadius, percent }) => {
                                const radius = innerRadius + (outerRadius - innerRadius) * 0.5;
                                const x = cx + radius * Math.cos(-midAngle * (Math.PI / 180));
                                const y = cy + radius * Math.sin(-midAngle * (Math.PI / 180));
                                return ( <text x={x} y={y} fill="white" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline="central" fontWeight="bold"> {`${(percent * 100).toFixed(0)}%`} </text> );
                            }}>
                                {data.charts.decisionDrivers.map((entry, index) => (
                                    <Cell key={`cell-${index}`} fill={data.charts.decisionDriverColors[index % data.charts.decisionDriverColors.length]} />
                                ))}
                            </Pie>
                            <Tooltip contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.9)', borderRadius: '0.75rem', border: '1px solid #e5e7eb' }}/>
                            <Legend />
                        </PieChart>
                    </ResponsiveContainer>
                </div>
            </Card>
            <Card className="h-full flex flex-col p-6 md:p-8">
                <h4 className="font-bold text-xl text-gray-700 mb-6 text-center">Attribute Comparison</h4>
                <div className="overflow-x-auto">
                    <table className="min-w-full">
                        <thead>
                            <tr>
                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider">Attribute</th>
                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider">Gen Z</th>
                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider">Millennials</th>
                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider">Gen X</th>
                                <th className="px-4 py-3 text-left text-sm font-semibold text-gray-500 uppercase tracking-wider">Boomers</th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-gray-200">
                            {data.comparativeTable.map((row, index) => (
                                <tr key={index} className="hover:bg-gray-50">
                                    <td className="px-4 py-4 text-sm font-medium text-gray-800 whitespace-nowrap">{row.attribute}</td>
                                    <td className="px-4 py-4 text-sm text-gray-600">{row.genZ}</td>
                                    <td className="px-4 py-4 text-sm text-gray-600">{row.millennials}</td>
                                    <td className="px-4 py-4 text-sm text-gray-600">{row.genX}</td>
                                    <td className="px-4 py-4 text-sm text-gray-600">{row.babyBoomers}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </Card>
        </div>
      </div>
    </Section>
  );
};

const GenerationalDrilldown = ({ generations, selected, setSelected }) => {
    const selectedGen = generations[selected];
    const sectionRef = useRef(null);
    const isInitialMount = useRef(true);

    useEffect(() => {
        if (isInitialMount.current) {
            isInitialMount.current = false;
        } else if (selected && sectionRef.current) {
            setTimeout(() => {
                sectionRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }
    }, [selected]);

    return (
        <Section id="deep-dive" title="Generational Deep Dive" icon={Users} ref={sectionRef}>
            <div className="mb-10 flex flex-col sm:flex-row items-center gap-4">
                <label htmlFor="generation-select" className="font-semibold text-gray-700 text-lg">Explore a specific generation:</label>
                <select 
                    id="generation-select"
                    value={selected}
                    onChange={(e) => setSelected(e.target.value)}
                    className="p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                >
                    {Object.values(generations).map(gen => (
                        <option key={gen.id} value={gen.id}>{gen.name}</option>
                    ))}
                </select>
            </div>

            {selectedGen && (
                <Card className="animate-fade-in">
                    <div className="p-6 md:p-10">
                        <h3 className="text-3xl font-bold text-indigo-700 mb-2">{selectedGen.name}</h3>
                        <p className="text-xl font-semibold text-gray-600 mb-8">{selectedGen.title}</p>
                        
                        <div className="grid lg:grid-cols-3 gap-6 mb-10">
                            {selectedGen.quotes.map((quote, i) => (
                                <blockquote key={i} className="bg-gray-100/70 p-5 rounded-xl border-l-4 border-indigo-400">
                                    <p className="text-gray-700 italic leading-relaxed">{quote}</p>
                                </blockquote>
                            ))}
                        </div>
                        
                        <p className="text-gray-700 leading-relaxed mb-10">{selectedGen.overview}</p>
                        
                        <div className="grid md:grid-cols-3 gap-6 text-base">
                            <div className="bg-blue-50/50 p-6 rounded-xl">
                                <h4 className="font-bold text-blue-800 mb-3 text-lg">Unique Needs</h4>
                                <ul className="list-disc list-inside space-y-2 text-blue-900">
                                    {selectedGen.needs.map((need, i) => <li key={i}>{need}</li>)}
                                </ul>
                            </div>
                            <div className="bg-green-50/50 p-6 rounded-xl">
                                <h4 className="font-bold text-green-800 mb-3 text-lg">Key Expectations</h4>
                                <ul className="list-disc list-inside space-y-2 text-green-900">
                                    {selectedGen.expectations.map((exp, i) => <li key={i}>{exp}</li>)}
                                </ul>
                            </div>
                            <div className="bg-yellow-50/50 p-6 rounded-xl">
                                <h4 className="font-bold text-yellow-800 mb-3 text-lg">Defining Behaviors</h4>
                                <ul className="list-disc list-inside space-y-2 text-yellow-900">
                                    {selectedGen.behaviors.map((beh, i) => <li key={i}>{beh}</li>)}
                                </ul>
                            </div>
                        </div>
                    </div>
                </Card>
            )}
        </Section>
    );
};

const CaseStudies = ({ data }) => {
  const [activeTab, setActiveTab] = useState('success');

  return (
    <Section id="case-studies" title="Case Studies: Entering the US Market" icon={TrendingUp} className="bg-gray-50/50">
      <div className="mb-12 flex justify-center">
        <div className="bg-gray-200/80 p-1.5 rounded-xl flex space-x-2">
          <button 
            onClick={() => setActiveTab('success')} 
            className={`px-5 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 ${activeTab === 'success' ? 'bg-white text-green-600 shadow-md' : 'text-gray-600 hover:bg-white/50'}`}
          >
            <CheckCircle className="inline w-5 h-5 mr-2"/>
            Success Stories
          </button>
          <button 
            onClick={() => setActiveTab('failure')}
            className={`px-5 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 ${activeTab === 'failure' ? 'bg-white text-red-600 shadow-md' : 'text-gray-600 hover:bg-white/50'}`}
          >
            <AlertTriangle className="inline w-5 h-5 mr-2"/>
            Cautionary Tales
          </button>
        </div>
      </div>

      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {data[activeTab].map(study => (
          <Card key={study.id} className="flex flex-col animate-fade-in group">
            <div className="p-8 flex-grow">
              <span className={`inline-block px-3 py-1 text-xs font-semibold rounded-full mb-4 ${activeTab === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                {study.company}
              </span>
              <h4 className="font-bold text-xl text-gray-800 mb-3">{study.title}</h4>
              <p className="text-gray-600 text-sm leading-relaxed">{study.overview}</p>
            </div>
            <div className="bg-gray-50 p-8 border-t border-gray-200 transition-colors duration-300 group-hover:bg-gray-100">
                <h5 className="font-semibold text-sm text-gray-500 uppercase tracking-wider mb-3">Key Takeaway</h5>
                <p className="text-sm text-gray-700 font-medium leading-relaxed">{study.why}</p>
            </div>
          </Card>
        ))}
      </div>
    </Section>
  );
};

const RecommendationItem = ({ item }) => {
    const [isOpen, setIsOpen] = useState(false);
    return (
        <div className="border-b border-gray-200 last:border-b-0 py-6">
            <button onClick={() => setIsOpen(!isOpen)} className="w-full flex justify-between items-center text-left gap-6">
                <span className="font-semibold text-xl text-gray-800">{item.id}. {item.title}</span>
                <ChevronDown className={`w-7 h-7 text-indigo-500 transition-transform duration-300 flex-shrink-0 ${isOpen ? 'rotate-180' : ''}`} />
            </button>
            <div className={`grid transition-all duration-500 ease-in-out ${isOpen ? 'grid-rows-[1fr] opacity-100 mt-6' : 'grid-rows-[0fr] opacity-0'}`}>
                <div className="overflow-hidden">
                    <div className="pl-8 space-y-5 text-gray-600 leading-relaxed">
                        <div>
                            <h5 className="font-semibold text-gray-700 mb-2">Why It's Important:</h5>
                            <p>{item.importance}</p>
                        </div>
                        <div>
                            <h5 className="font-semibold text-gray-700 mb-2">How to Implement:</h5>
                            <p>{item.implementation}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
};

const Recommendations = ({ data }) => {
    return (
        <Section id="recommendations" title="10 Actionable Recommendations" icon={Lightbulb}>
            <Card>
                <div className="p-4 md:p-8">
                    {data.map(item => <RecommendationItem key={item.id} item={item} />)}
                </div>
            </Card>
        </Section>
    );
};


// --- Main App Component ---

export default function App() {
  const [selectedGeneration, setSelectedGeneration] = useState('millennials');
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const navLinks = [
    { name: 'Overview', href: '#overview' },
    { name: 'Case Studies', href: '#case-studies' },
    { name: 'Deep Dive', href: '#deep-dive' },
    { name: 'Recommendations', href: '#recommendations' },
  ];
  
  const handleNavClick = (e, href) => {
      e.preventDefault();
      const targetElement = document.querySelector(href);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: 'smooth' });
      }
      setIsMenuOpen(false);
  };

  useEffect(() => {
    window.scrollTo(0, 0);
  }, []);

  return (
    <div className="bg-white font-sans antialiased text-gray-900">
      {/* Header */}
      <header className="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <div className="container mx-auto px-4 sm:px-6 lg:px-8">
            <div className="flex justify-between items-center h-20">
                <a href="#" className="flex items-center" onClick={(e) => { e.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' }); }}>
                    <Target className="w-9 h-9 text-indigo-600 mr-3"/>
                    <h1 className="text-xl md:text-2xl font-bold text-gray-800">US B2B User Insights</h1>
                </a>
                <nav className="hidden md:flex items-center space-x-8">
                    {navLinks.map(link => (
                        <a key={link.name} href={link.href} onClick={(e) => handleNavClick(e, link.href)} className="text-gray-600 font-medium hover:text-indigo-600 transition-colors duration-200">
                            {link.name}
                        </a>
                    ))}
                </nav>
                <div className="md:hidden">
                    <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2 rounded-md text-gray-600 hover:bg-gray-100">
                        {isMenuOpen ? <X className="w-7 h-7" /> : <Menu className="w-7 h-7" />}
                    </button>
                </div>
            </div>
            {/* Mobile Menu */}
            <div className={`md:hidden overflow-hidden transition-all duration-300 ease-in-out ${isMenuOpen ? 'max-h-96' : 'max-h-0'}`}>
                <nav className="py-4 border-t border-gray-200">
                    <ul className="flex flex-col space-y-1">
                        {navLinks.map(link => (
                            <li key={link.name}>
                                <a href={link.href} onClick={(e) => handleNavClick(e, link.href)} className="block py-3 px-4 text-lg text-gray-600 font-medium rounded-md hover:bg-gray-100 hover:text-indigo-600 transition-colors">
                                    {link.name}
                                </a>
                            </li>
                        ))}
                    </ul>
                </nav>
            </div>
        </div>
      </header>

      <main>
        <Overview data={{overview: reportData.overview, charts: reportData.charts, comparativeTable: reportData.comparativeTable}} />
        <CaseStudies data={reportData.caseStudies} />
        <GenerationalDrilldown 
            generations={reportData.generations} 
            selected={selectedGeneration}
            setSelected={setSelectedGeneration}
        />
        <Recommendations data={reportData.recommendations} />
      </main>

      {/* Footer */}
      <footer className="bg-gray-800 text-gray-300">
        <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div className="grid lg:grid-cols-2 gap-12">
                <div className="max-w-md">
                    <h3 className="text-xl font-semibold text-white mb-4">This interactive report was created by <a href="https://www.linkedin.com/in/ayelet-lazarovitch/" target="_blank" rel="noopener noreferrer" className="text-indigo-400 hover:text-indigo-300 transition-colors">Ayelet Lazarovitch</a>, powered by Gemini Deep Research.</h3>
                    <p className="mb-4 leading-relaxed">Interested in the most effective ways to localize and optimize your product?</p>
                    <p className="mb-6 leading-relaxed">Hi, I'm Ayelet Lazarovitch, a UX & Product Advisor and former Google Product Specialist who helped over 100 global brands boost performance. Let's connect & find ways to optimize your product.</p>
                    <a href="https://calendly.com/ayelet-ux/quick-intro" target="_blank" rel="noopener noreferrer" className="inline-block bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
                        Book a quick intro
                    </a>
                </div>
                <div>
                     {/* Can add another column of links or info here in the future */}
                </div>
            </div>
            <div className="mt-16 pt-8 border-t border-gray-700 text-center">
                <p className="text-xs text-gray-500">Disclaimer: The information and recommendations provided in this report are generated by an AI model based on the attached research documents. While created to be insightful, they may not be suitable for all products or contexts. It is crucial to conduct your own testing and validation to ensure these strategies are effective for your specific business goals.</p>
                <p className="mt-4 text-sm text-gray-400">&copy; 2025 <a href="https://www.linkedin.com/in/ayelet-lazarovitch/" target="_blank" rel="noopener noreferrer" className="hover:text-indigo-400 transition-colors">Ayelet Lazarovitch</a>. All rights reserved.</p>
            </div>
        </div>
      </footer>
    </div>
  );
}
